@model Domus.Web.UI.Models.Recipes.SelectedRecipeViewModel

@{
    ViewBag.Title = Model.Recipe.Name;
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div id="recipeSearch">
@using (@Html.BeginForm("Index", "Recipe"))
{
    @Html.TextBoxFor(m => m.SearchText)
    <input id="searchButton" type="submit" value="Search"/>
}
</div>

<div id="recipeCategories">
    @Html.Partial("Categories", Model.Categories)
        <br/>
    <br/>
    @Html.ActionLink("Add Recipe", "Create", new { }, new { id = "createButton" })
</div>

<div id="recipeDetails">

    @Html.HiddenFor(model => model.Recipe.RecipeId)

    <div class="display-title">
        <table>
            <tr>
                <td> <h2>@Html.DisplayFor(model => model.Recipe.Name)</h2></td>
                <td>
                    &nbsp;&nbsp;@Html.Partial("RatingWidget", Model.Recipe.Rating.GetValueOrDefault())
                    &nbsp;&nbsp;@Html.ActionLink("Edit", "Edit", new { recipeId = Model.Recipe.RecipeId }, new { id = "editButton" })
                    </td>
            </tr>
        </table>
    </div>

    <div class="display-field">Servings:&nbsp;@Html.DisplayFor(model => model.Recipe.Servings)</div>

    <div class="display-label">Ingredients</div>
    <div class="display-field">@Html.Raw(Model.Recipe.Ingredients.Replace(Environment.NewLine, "<br/>"))</div>

    <div class="display-label">Directions</div>
    
    <div class="display-field">@Html.Raw(Model.Recipe.Directions.Replace(Environment.NewLine, "<br/>"))</div>

    <div class="display-field">
        @if (Model.Recipe.Source != null &&
            Model.Recipe.Source.StartsWith("http"))
        {
            <a href="@Model.Recipe.Source" target="new">@Model.Recipe.Source</a>
        }
        else
        {
            @Html.DisplayFor(model => model.Recipe.Source)
        }
     
     </div>
</div>

<script src="@Url.Content("~/Scripts/RecipeDetails.js")" type="text/javascript"></script>
